<section class="mx-auto w-full max-w-6xl px-6 py-16" id="certifications">
  <div class="flex flex-wrap items-end justify-between gap-6">
    <div class="space-y-3">
      <p class="text-xs font-semibold uppercase tracking-[0.3em] text-slate-500">
        Certifications
      </p>
      <h2 class="font-display text-3xl font-semibold text-white">
        Credentials and professional certifications.
      </h2>
      <p class="max-w-2xl text-slate-300">
        Verified certifications and professional training records.
      </p>
    </div>
  </div>

  <div class="mt-10 grid gap-6 md:grid-cols-2" data-certifications-grid>
    <div class="rounded-3xl border border-slate-800 bg-slate-900/60 p-6 text-sm text-slate-400">
      Certifications will appear here once available.
    </div>
  </div>
</section>

<script>
  const grid = document.querySelector("[data-certifications-grid]");

  const buildRow = (cert) => {
    const card = document.createElement("article");
    card.className =
      "flex h-full flex-col rounded-3xl border border-slate-800 bg-slate-900/60 p-6 shadow-sm";

    const title = document.createElement("h3");
    title.className = "font-display text-xl font-semibold text-white";
    title.textContent = cert.name ?? "Certification";

    const meta = document.createElement("p");
    meta.className = "mt-2 text-sm text-slate-300";
    meta.textContent = `${cert.issued_by ?? ""} Â· ${cert.year ?? ""}`.trim();

    const detail = document.createElement("p");
    detail.className = "mt-3 text-xs text-slate-500";
    detail.textContent = cert.credential_id
      ? `Credential ID: ${cert.credential_id}`
      : "Credential ID: -";

    const actions = document.createElement("div");
    actions.className = "mt-6 flex flex-wrap gap-3";

    if (cert.verify_link) {
      const verify = document.createElement("a");
      verify.className =
        "rounded-full border border-slate-700 px-4 py-2 text-xs font-semibold text-slate-200 transition hover:border-slate-500 hover:text-white";
      verify.href = cert.verify_link;
      verify.target = "_blank";
      verify.rel = "noreferrer";
      verify.textContent = "Verify";
      actions.append(verify);
    }

    if (cert.file_key) {
      const file = document.createElement("a");
      file.className =
        "rounded-full border border-slate-700 px-4 py-2 text-xs font-semibold text-slate-200 transition hover:border-slate-500 hover:text-white";
      file.href = `/media/${cert.file_key}`;
      file.target = "_blank";
      file.rel = "noreferrer";
      file.textContent = "Download";
      actions.append(file);
    }

    card.append(title, meta, detail, actions);
    return card;
  };

  const loadCertifications = async () => {
    if (!grid) return;
    try {
      const response = await fetch("/data/certifications");
      if (!response.ok) throw new Error("Failed");
      const json = await response.json();
      const items = json.data ?? [];

      if (!items.length) return;
      grid.innerHTML = "";
      items.forEach((item) => grid.append(buildRow(item)));
    } catch (error) {
      // Keep placeholder
    }
  };

  loadCertifications();
</script>
